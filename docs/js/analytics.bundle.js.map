{"version":3,"sources":["webpack:///./resources/js/analytics.js"],"names":["PATH","Index","window","AudioContext","webkitAudioContext","audioContext","$man","document","querySelector","$woman","$playMan","$playWoman","$analysis","$allAnalysis","wave","waveContext","getContext","canvas","getElementById","context","$mPeak","$wPeak","$mLength","$wLength","$similarity","bufsize","analyser","createAnalyser","fftSize","smoothingTimeContant","frequency","Uint8Array","noise","wFrequencys","mFrequencys","domain","wDomains","mDomains","wGraph","mGraph","mGraphs","wGraphs","log","bind","mode","addEventListener","playMan","playWoman","analysis","analysisAll","url","value","getAudioBuffer","buffer","playSound","callback","req","XMLHttpRequest","responseType","onreadystatechange","readyState","status","decodeAudioData","response","open","send","source","createBufferSource","connect","destination","start","playAnalysis","isRecording","setTimeout","frame","requestAnimationFrame","getByteFrequencyData","getByteTimeDomainData","copyData","length","set","push","copyData2","drawWave","globalCompositeOperation","clearRect","fillStyle","i","sum","j","average","fillRect","width","height","y","mPeak","getPeak","wPeak","mLength","getHalfMaximumFrames","wLength","similarity","getSimilarity","innerText","each","mValue","wValue","console","querySelectorAll","mIndex","wIndex","selected","delay","lastAnalysis","graph","max","count","graph1","graph2","value1","value2","Math","pow","sqrt","INDEX"],"mappings":"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","file":"analytics.bundle.js","sourcesContent":["import $ from 'jquery'\nimport _ from 'lodash'\n\nconst PATH = '/sound/';\n\n/**\n * Main Script\n */\nclass Index {\n  constructor() {\n\n    window.AudioContext = window.AudioContext || window.webkitAudioContext;\n    this.audioContext = new AudioContext();\n\n    this.$man = document.querySelector('#man');\n    this.$woman = document.querySelector('#woman');\n    this.$playMan = document.querySelector('#playMan');\n    this.$playWoman = document.querySelector('#playWoman');\n    this.$analysis = document.querySelector('#analysis');\n    this.$allAnalysis = document.querySelector('#allAnalysis');\n    this.wave = document.querySelector('.wave');\n    this.waveContext = this.wave.getContext(\"2d\");\n    this.canvas = document.getElementById(\"cvs\");\n    this.context = this.canvas.getContext(\"2d\");\n\n    this.$mPeak = document.querySelector('.mPeak');\n    this.$wPeak = document.querySelector('.wPeak');\n    this.$mLength = document.querySelector('.mLength');\n    this.$wLength = document.querySelector('.wLength');\n    this.$similarity = document.querySelector('.similarity');\n\n    this.bufsize = 1024;\n\n    this.analyser = this.audioContext.createAnalyser();\n    this.analyser.fftSize = this.bufsize;\n    this.analyser.smoothingTimeContant = 0;\n\n    this.frequency = new Uint8Array(this.bufsize);\n    this.noise = new Uint8Array(this.bufsize);\n    this.wFrequencys = [];\n    this.mFrequencys = [];\n    this.domain = new Uint8Array(this.bufsize);\n    this.wDomains = [];\n    this.mDomains = [];\n    this.wGraph = [];\n    this.mGraph = [];\n    this.mGraphs = {};\n    this.wGraphs = {};\n\n    this.log = '';\n\n    this.bind();\n    this.mode = 'man';\n\n    // this.timer = setInterval(() => {\n    //   this.drawGraph();\n    // }, 1000 / 60);\n  }\n\n  bind() {\n    this.$playMan.addEventListener('click', () => {\n      this.playMan();\n    });\n    this.$playWoman.addEventListener('click', () => {\n      this.playWoman();\n    });\n    this.$analysis.addEventListener('click', () => {\n      this.analysis();\n    });\n    this.$allAnalysis.addEventListener('click', () => {\n      this.analysisAll();\n    });\n  }\n\n  playMan() {\n    const url = `${PATH}${this.$man.value}`;\n    this.mode = 'man';\n    this.mFrequencys = [];\n    this.mDomains = [];\n    this.getAudioBuffer(url, (buffer) => {\n      this.playSound(buffer);\n    });\n  }\n\n  playWoman() {\n    const url = `${PATH}${this.$woman.value}`;\n    this.mode = 'woman';\n    this.wFrequencys = [];\n    this.wDomains = [];\n    this.getAudioBuffer(url, (buffer) => {\n      this.playSound(buffer);\n    });\n  }\n\n  getAudioBuffer(url, callback) {\n    const req = new XMLHttpRequest();\n    req.responseType = 'arraybuffer';\n    req.onreadystatechange = () => {\n      if (req.readyState === 4) {\n        if (req.status === 0 || req.status === 200) {\n          this.audioContext.decodeAudioData(req.response, (buffer) => {\n            this.buffer = buffer;\n            callback(buffer);\n          });\n        }\n      }\n    };\n\n    req.open('GET', url, true);\n    req.send('');\n  }\n\n  playSound(buffer) {\n    const source = this.audioContext.createBufferSource();\n    source.buffer = buffer;\n    source.connect(this.analyser);\n    this.analyser.connect(this.audioContext.destination);\n    source.start(0);\n    this.playAnalysis();\n  }\n\n  playAnalysis() {\n    let isRecording = true;\n    setTimeout(() => {\n      isRecording = false;\n    }, 3000);\n\n    const frame = () => {\n      if (isRecording) {\n        requestAnimationFrame(frame);\n\n        this.analyser.getByteFrequencyData(this.frequency);\n        this.analyser.getByteTimeDomainData(this.domain);\n\n        if (this.frequency[10] > 0) {\n          const copyData = new Uint8Array(this.frequency.length);\n          copyData.set(this.frequency);\n          if (this.mode === 'man')\n            this.mFrequencys.push(copyData);\n          else\n            this.wFrequencys.push(copyData);\n\n          const copyData2 = new Uint8Array(this.domain.length);\n          copyData2.set(this.domain);\n          if (this.mode === 'man')\n            this.mDomains.push(copyData2);\n          else\n            this.wDomains.push(copyData2);\n        }\n        this.drawWave();\n      }\n    };\n\n    frame();\n  }\n\n  drawWave() {\n\n    this.waveContext.globalCompositeOperation = 'lighter';\n\n    // this.waveContext.shadowBlur = 20;\n    // this.waveContext.shadowOffsetX = 0;\n    // this.waveContext.shadowOffsetY = 0;\n    this.mGraph = [];\n    this.wGraph = [];\n\n    this.waveContext.clearRect(0, 0, 640, 400);\n\n    this.waveContext.fillStyle = \"#ff00fc\";\n    //this.waveContext.shadowColor = \"#ff00fc\";\n\n    for (let i = 0; i < this.wFrequencys.length; i++) {\n      let sum = 0;\n      for (let j = 0; j < this.wFrequencys[i].length; j++) {\n        sum += this.wFrequencys[i][j];\n      }\n      const average = sum / this.wFrequencys[i].length * 2;\n      this.waveContext.fillRect(51 + 3 * i, 200, 1, average);\n      this.waveContext.fillRect(51 + 3 * i, 200, 1, -average);\n      this.wGraph.push(average);\n    }\n\n\n    this.waveContext.fillStyle = \"#00bafd\";\n    //this.waveContext.shadowColor = \"#00bafd\";\n\n    for (let i = 0; i < this.mFrequencys.length; i++) {\n      let sum = 0;\n      for (let j = 0; j < this.mFrequencys[i].length; j++) {\n        sum += this.mFrequencys[i][j];\n      }\n      const average = sum / this.mFrequencys[i].length * 2;\n      this.waveContext.fillRect(50 + 3 * i, 200, 1, average);\n      this.waveContext.fillRect(50 + 3 * i, 200, 1, -average);\n      this.mGraph.push(average);\n    }\n  }\n\n  drawGraph() {\n\n    const width = 1024;\n    const height = 512;\n\n\n    this.context.fillStyle = \"#fff\";\n    this.context.fillRect(0, 0, width, height);\n\n    this.context.fillStyle = \"#009900\";\n\n    for (let i = 0; i < 512; ++i) {\n      let y = (this.frequency[i] - this.noise[i]) * 2;\n      this.context.fillRect(i * 2, height - y, 2, y);\n    }\n\n    this.context.fillStyle = \"#99044f\";\n    for (let i = 0; i < 512; ++i) {\n      let y = this.domain[i] * 2 - height / 2;\n      this.context.fillRect(i * 2, height / 2, 2, y);\n    }\n\n\n  }\n\n\n  analysis() {\n\n    const mPeak = Index.getPeak(this.mGraph);\n    const wPeak = Index.getPeak(this.wGraph);\n    const mLength = Index.getHalfMaximumFrames(this.mGraph);\n    const wLength = Index.getHalfMaximumFrames(this.wGraph);\n    const similarity = Index.getSimilarity(this.mGraph, this.wGraph);\n\n    this.$mPeak.innerText = mPeak;\n    this.$wPeak.innerText = wPeak;\n    this.$mLength.innerText = mLength;\n    this.$wLength.innerText = wLength;\n    this.$similarity.innerText = similarity;\n\n    //console.log(`${this.$man.value},${this.$woman.value},${mPeak},${wPeak},${mLength},${wLength},${similarity}`);\n    //this.log += `${this.$man.value},${this.$woman.value},${mPeak},${wPeak},${mLength},${wLength},${similarity}\\n`;\n\n    this.mGraphs[this.$man.value] = this.mGraph;\n    this.wGraphs[this.$woman.value] = this.wGraph;\n  }\n\n  lastAnalysis() {\n    _.each(this.mGraphs, (mGraph, mValue) => {\n      _.each(this.wGraphs, (wGraph, wValue) => {\n        const mPeak = Index.getPeak(mGraph);\n        const wPeak = Index.getPeak(wGraph);\n        const mLength = Index.getHalfMaximumFrames(mGraph);\n        const wLength = Index.getHalfMaximumFrames(wGraph);\n        const similarity = Index.getSimilarity(mGraph, wGraph);\n\n        console.log(`${mValue},${wValue},${mPeak},${wPeak},${mLength},${wLength},${similarity}`);\n        this.log += `${mValue},${wValue},${mPeak},${wPeak},${mLength},${wLength},${similarity}\\n`;\n      });\n    });\n  }\n\n  static getPeak(graph) {\n    return _.max(graph)\n  }\n\n  static getHalfMaximumFrames(graph) {\n    let count = 0;\n    const max = _.max(graph);\n    _.each(graph, (value) => {\n      if (value > max / 2) count++;\n    });\n    return count;\n  }\n\n  static getSimilarity(graph1, graph2) {\n    let sum = 0;\n    for(let i = 0; i < 180; i++) {\n      const value1 = i < graph1.length ? graph1[i] : 0;\n      const value2 = i < graph2.length ? graph2[i] : 0;\n     sum += Math.pow(value1 - value2, 2);\n    }\n\n    return Math.sqrt(sum);\n  }\n\n  playAll() {\n    const mLength = this.$man.querySelectorAll('option').length;\n    const wLength = this.$woman.querySelectorAll('option').length;\n    let mIndex = 0;\n    let wIndex = 0;\n    let mode = 'm';\n\n    //this.playWoman();\n\n    let mGraphs = {};\n    let wGraphs = {};\n\n    const analysis = () => {\n      document.querySelector(`#man option:nth-child(${mIndex + 1})`).selected = true;\n      document.querySelector(`#woman option:nth-child(${wIndex + 1})`).selected = true;\n\n      if (mode === 'm') {\n        this.playMan();\n\n        _.delay(() => {\n          this.analysis();\n\n          mIndex++;\n\n          if (mIndex === mLength) {\n            mode = 'w';\n            mIndex--;\n          }\n          analysis();\n        }, 5000);\n\n      } else {\n        this.playWoman();\n\n        _.delay(() => {\n          this.analysis();\n\n          wIndex++;\n\n          if (wIndex === wLength) {\n            this.lastAnalysis();\n          } else {\n            analysis();\n          }\n        }, 5000);\n      }\n    };\n\n    analysis();\n  }\n\n  analysisAll() {\n    const mLength = this.$man.querySelectorAll('option').length;\n    const wLength = this.$woman.querySelectorAll('option').length;\n    let mIndex = 0;\n    let wIndex = 0;\n\n    this.playWoman();\n\n    let mGraphs = {};\n    let wGraphs = {};\n\n    const analysis = () => {\n      document.querySelector(`#man option:nth-child(${mIndex + 1})`).selected = true;\n      document.querySelector(`#woman option:nth-child(${wIndex + 1})`).selected = true;\n\n      if (mIndex === 0) {\n        this.playWoman();\n\n        _.delay(() => {\n          this.playMan();\n        }, 5000);\n\n        _.delay(() => {\n          this.analysis();\n\n          mIndex++;\n          if (mIndex === mLength) {\n            mIndex = 0;\n            wIndex++;\n          }\n\n          if (wIndex !== wLength) {\n            analysis();\n          } else {\n            console.log(this.log);\n          }\n        }, 10000);\n      } else {\n          this.playMan();\n\n        _.delay(() => {\n          this.analysis();\n\n          mIndex++;\n          if (mIndex === mLength) {\n            mIndex = 0;\n            wIndex++;\n          }\n\n          if (wIndex !== wLength) {\n            analysis();\n          } else {\n            console.log(this.log);\n          }\n        }, 5000);\n      }\n    };\n\n    analysis();\n  }\n}\n\nwindow.INDEX = new Index();\n\n\n\n// WEBPACK FOOTER //\n// ./resources/js/analytics.js"],"sourceRoot":""}